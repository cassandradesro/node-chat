{"version":3,"sources":["main.js"],"names":["console","log","sendMessage","field","document","querySelector","username","value","axios","post","text","then","res","showMessagesOnDOM","data","catch","error","setInterval","messages","messagesUL","innerHTML","forEach","message","newMessage","createElement","timestamp","appendChild","addEventListener"],"mappings":";;AAAAA,QAAQC,GAAR;;AAEA;AACA;AACA;AACA;;;AAGA,IAAIC,cAAc,SAAdA,WAAc,GAAU;AAC3B,KAAIC,QAAOC,SAASC,aAAT,CAAuB,2BAAvB,CAAX;AACA,KAAIC,WAAUF,SAASC,aAAT,CAAuB,4BAAvB,CAAd;;AAEA,KAAGF,MAAMI,KAAN,IAAeD,SAASC,KAA3B,EAAiC;AAChCP,UAAQC,GAAR,CAAY,iBAAZ,EAA+BE,MAAMI,KAArC;;AAEAC,QAAM;AAAN,GACEC,IADF,CACO,+BADP,EACwC;AACtCC,SAAMP,MAAMI,KAD0B;AAEtCD,aAAUA,SAASC;;AAFmB,GADxC,EAMEI,IANF,CAMO,UAASC,GAAT,EAAa;AAClBZ,WAAQC,GAAR,CAAY,SAAZ,EAAuBW,GAAvB;AACAT,SAAMI,KAAN,GAAY,EAAZ,CAFkB,CAEF;AAChBP,WAAQC,GAAR,CAAY,kBAAZ,EAAgCW,GAAhC;AACAC,qBAAkBD,IAAIE,IAAtB;AACA,GAXF,EAYEC,KAZF,CAYQ,UAASC,KAAT,EAAe;AACrBhB,WAAQC,GAAR,CAAY,OAAZ,EAAqBe,KAArB;AACA,GAdF;AAeA;AACD,CAvBD;;AAyBAC,YAAYf,WAAZ,EAAyB,IAAzB;;AAEA,IAAIW,oBAAoB,SAApBA,iBAAoB,CAASK,QAAT,EAAkB;AACzClB,SAAQC,GAAR,CAAY,sBAAZ,EAAoCiB,QAApC;;AAEA,KAAIC,aAAaf,SAASC,aAAT,CAAuB,aAAvB,CAAjB;AACAc,YAAWC,SAAX,GAAuB,EAAvB;;AAEA;AACA;AACA;;AAEAF,UAASG,OAAT,CAAiB,UAASC,OAAT,EAAiB;AACjC,MAAIC,aAAanB,SAASoB,aAAT,CAAuB,IAAvB,CAAjB;AACA,MAAIC,YAAYrB,SAASoB,aAAT,CAAuB,GAAvB,CAAhB;AACA,MAAIlB,WAAWF,SAASoB,aAAT,CAAuB,KAAvB,CAAf;;AAEAC,YAAUL,SAAV,GAAsBE,QAAQG,SAA9B;AACAF,aAAWH,SAAX,GAAuBE,QAAQZ,IAA/B;AACAJ,WAASc,SAAT,GAAqBE,QAAQhB,QAA7B;;AAEAmB,YAAUC,WAAV,CAAuBpB,QAAvB;AACAiB,aAAWG,WAAX,CAAwBD,SAAxB;AACAN,aAAWO,WAAX,CAAwBH,UAAxB;AAEA,EAbD;AAeA,CAzBD;;AA2BAnB,SAASC,aAAT,CAAuB,OAAvB,EAAgCsB,gBAAhC,CAAiD,OAAjD,EAA0DzB,WAA1D;AACA","file":"main.js","sourcesContent":["console.log(`Node API Chat`)\n\n//user types, preses send, message appears\n//user types, preses send, send message to server, message appears\n//user types, preses send, get message from the field, send message to server, message appears\n//user types, preses send, get message from the field, send message to server, get message list from server, message appears\n\n\nlet sendMessage = function(){\n\tlet field =document.querySelector('input[name=\"new-message\"]')\n\tlet username =document.querySelector('input[name=\"new-username\"]')\n\n\tif(field.value && username.value){\n\t\tconsole.log('send to server:', field.value)\n\n\t\taxios //172.31.16.162\n\t\t\t.post(\"http://localhost:1337/message\", {\n\t\t\t\ttext: field.value,\n\t\t\t\tusername: username.value\n\n\t\t\t})\n\t\t\t.then(function(res){\n\t\t\t\tconsole.log(\"success\", res)\n\t\t\t\tfield.value=\"\"; // we put it in here so it ony happens upon successful submission\n\t\t\t\tconsole.log(\"server responded\", res)\n\t\t\t\tshowMessagesOnDOM(res.data);\n\t\t\t})\n\t\t\t.catch(function(error){\n\t\t\t\tconsole.log(\"error\", error)\n\t\t\t})\n\t}\n}\n\nsetInterval(sendMessage, 8000);\n\nlet showMessagesOnDOM = function(messages){\n\tconsole.log(\"gonna show messages:\", messages)\n\n\tlet messagesUL = document.querySelector(\"ul.messages\");\n\tmessagesUL.innerHTML = \"\";\n\n\t// while(messagesUL.children.length){\n\t// \tmessagesUL.removeChild( messagesUL.children[0])\n\t// }\n\n\tmessages.forEach(function(message){\n\t\tlet newMessage = document.createElement(\"li\");\n\t\tlet timestamp = document.createElement(\"a\")\n\t\tlet username = document.createElement(\"div\")\n\n\t\ttimestamp.innerHTML = message.timestamp;\n\t\tnewMessage.innerHTML = message.text\n\t\tusername.innerHTML = message.username;\n\n\t\ttimestamp.appendChild( username );\n\t\tnewMessage.appendChild( timestamp );\n\t\tmessagesUL.appendChild( newMessage );\n\n\t})\t\n\n}\n\ndocument.querySelector('.send').addEventListener('click', sendMessage);\n// document.querySelector('.username').addEventListener('click', postUsername);\n\n"]}